# ğŸ—ºï¸ ROADMAP.md â€” è¯¦ç»†è·¯çº¿å›¾

## æ€»è§ˆ

```
Phase 1 â”€â”€â†’ Phase 2 â”€â”€â†’ Phase 3 â”€â”€â†’ Phase 4 â”€â”€â†’ Phase 5
 å­˜å‚¨æ ¸å¿ƒ    æ£€ç´¢+è¡°å‡    ç¡çœ å‘¨æœŸ    MCP+CLI     æ–‡æ¡£+å‘å¸ƒ
 (1.5å¤©)     (1.5å¤©)      (1å¤©)      (1å¤©)       (1å¤©)
   M1          M2          M3         M4          M5
```

---

## Phase 1ï¼šå­˜å‚¨æ ¸å¿ƒ ğŸ—ï¸ï¼ˆé¢„è®¡ 1.5 å¤©ï¼‰

**é‡Œç¨‹ç¢‘ M1ï¼šèƒ½ remember + recall + snapshot**

### ä»»åŠ¡æ¸…å•

| # | ä»»åŠ¡ | é¢„è®¡è€—æ—¶ | ä¼˜å…ˆçº§ | ä¾èµ– |
|---|------|---------|--------|------|
| 1.1 | é¡¹ç›®è„šæ‰‹æ¶ï¼ˆtsconfigã€tsupã€vitestã€package.jsonï¼‰ | 30min | P0 | â€” |
| 1.2 | SQLite åˆå§‹åŒ– + WAL + è¿ç§»æ¡†æ¶ (core/db.ts) | 1h | P0 | 1.1 |
| 1.3 | memories è¡¨ CRUD + hash å»é‡ (core/memory.ts) | 2h | P0 | 1.2 |
| 1.4 | FTS5 è™šæ‹Ÿè¡¨ + ç´¢å¼•åŒæ­¥ | 1h | P0 | 1.3 |
| 1.5 | paths è¡¨ URI ç³»ç»Ÿ + åŸŸç®¡ç† (core/path.ts) | 1.5h | P0 | 1.2 |
| 1.6 | links è¡¨ å…³è” + å¤šè·³éå† (core/link.ts) | 1.5h | P1 | 1.2 |
| 1.7 | snapshots è‡ªåŠ¨å¿«ç…§ + å›æ»š (core/snapshot.ts) | 1.5h | P0 | 1.3 |
| 1.8 | Write Guard (core/guard.ts) â€” hash+URI+BM25+å†²çªåˆå¹¶+å››å‡†åˆ™ | 2h | P0 | 1.3, 1.4 |
| 1.9 | agent_id éš”ç¦»ï¼ˆå¤šAgent scopeï¼‰ | 30min | P1 | 1.3 |
| 1.10 | Phase 1 å•å…ƒæµ‹è¯• | 2h | P0 | å…¨éƒ¨ |

**M1 éªŒæ”¶æ ‡å‡†ï¼š**
- `remember("å°å¿ƒæ˜¯æˆ‘çš„å¥‘çº¦è€…", "core://user/identity")` â†’ å†™å…¥æˆåŠŸ
- é‡å¤ remember åŒå†…å®¹ â†’ è·³è¿‡ï¼ˆhashå»é‡ï¼‰
- `recall("å¥‘çº¦è€…")` â†’ è¿”å›å¯¹åº”è®°å¿†
- `recall_path("core://user/identity")` â†’ ç²¾ç¡®è¿”å›
- ä¿®æ”¹è®°å¿† â†’ è‡ªåŠ¨å¿«ç…§ â†’ å¯å›æ»š
- æµ‹è¯•è¦†ç›– â‰¥80%

---

## Phase 2ï¼šæ£€ç´¢ + è¡°å‡ ğŸ”ï¼ˆé¢„è®¡ 1.5 å¤©ï¼‰

**é‡Œç¨‹ç¢‘ M2ï¼šèƒ½æ„å›¾æœç´¢ + è‰¾å®¾æµ©æ–¯è¡°å‡**

### ä»»åŠ¡æ¸…å•

| # | ä»»åŠ¡ | é¢„è®¡è€—æ—¶ | ä¼˜å…ˆçº§ | ä¾èµ– |
|---|------|---------|--------|------|
| 2.1 | BM25 æœç´¢å°è£… (search/bm25.ts) | 1h | P0 | M1 |
| 2.2 | æ„å›¾åˆ†ç±»å™¨ (search/intent.ts) â€” 4ç±»è·¯ç”± | 2h | P1 | 2.1 |
| 2.3 | Priority åŠ æƒæ’åº + ç»“æœé‡æ’ (search/rerank.ts) | 1.5h | P0 | 2.1 |
| 2.4 | å¯é€‰å¤–éƒ¨ embedding æ¥å£ (search/semantic.ts) | 1.5h | P2 | 2.1 |
| 2.5 | è‰¾å®¾æµ©æ–¯è¡°å‡å¼•æ“ (sleep/decay.ts) â€” R=e^(-t/S) | 2h | P0 | M1 |
| 2.6 | recall ç»­æœŸæœºåˆ¶ â€” S Ã— growth_factor | 30min | P0 | 2.5 |
| 2.7 | å¤šè·³éå†æ£€ç´¢ â€” ä» links å›¾è°±æœç´¢å…³è” | 1.5h | P1 | M1 |
| 2.8 | Phase 2 å•å…ƒæµ‹è¯• | 2h | P0 | å…¨éƒ¨ |

**M2 éªŒæ”¶æ ‡å‡†ï¼š**
- `recall("å°å¿ƒå–œæ¬¢ä»€ä¹ˆ")` â†’ æ„å›¾åˆ†ç±»ä¸º factual â†’ ç²¾ç¡®ç»“æœ
- `recall("æœ€è¿‘å‘ç”Ÿäº†ä»€ä¹ˆ")` â†’ æ„å›¾åˆ†ç±»ä¸º temporal â†’ æŒ‰æ—¶é—´æ’åº
- P0 è®°å¿†ä¸€å¹´å vitality ä»ä¸º 1.0
- P3 è®°å¿† 14 å¤©å vitality < 0.5
- recall å‘½ä¸­å stability å¢é•¿

---

## Phase 3ï¼šç¡çœ å‘¨æœŸ ğŸŒ™ï¼ˆé¢„è®¡ 1 å¤©ï¼‰

**é‡Œç¨‹ç¢‘ M3ï¼šèƒ½è‡ªåŠ¨ sync + tidy + govern**

### ä»»åŠ¡æ¸…å•

| # | ä»»åŠ¡ | é¢„è®¡è€—æ—¶ | ä¼˜å…ˆçº§ | ä¾èµ– |
|---|------|---------|--------|------|
| 3.1 | sync å¼•æ“ (sleep/sync.ts) â€” å»é‡+ç»“æ„åŒ–å†™å…¥+æƒ…æ„Ÿä¼˜å…ˆ | 2h | P0 | M2 |
| 3.2 | tidy å¼•æ“ (sleep/tidy.ts) â€” å‹ç¼©+è’¸é¦+å››å‡†åˆ™é—¨æ§ | 2h | P0 | M2 |
| 3.3 | govern æ²»ç† (sleep/govern.ts) â€” å­¤å„¿æ¸…ç†+ä½æ´»åŠ›å½’æ¡£+ç¢ç‰‡æ•´åˆ | 1.5h | P1 | 2.5 |
| 3.4 | system://boot å¯åŠ¨åŠ è½½ | 1h | P0 | M1 |
| 3.5 | Phase 3 é›†æˆæµ‹è¯• | 1.5h | P0 | å…¨éƒ¨ |

**M3 éªŒæ”¶æ ‡å‡†ï¼š**
- `reflect("sync")` â†’ ä»å¯¹è¯ä¸­æå–æ–°è®°å¿†ï¼Œè·³è¿‡å·²æœ‰
- `reflect("tidy")` â†’ å‹ç¼©æ—§è®°å¿†ï¼Œè’¸é¦åˆ°é«˜ä¼˜å…ˆçº§
- `reflect("decay")` â†’ æ‰¹é‡æ›´æ–° vitality
- `boot()` â†’ è¿”å›æ‰€æœ‰ P0 èº«ä»½è®°å¿†
- govern æ¸…ç† vitality < 0.05 çš„ P3 è®°å¿†

---

## Phase 4ï¼šMCP + CLI ğŸ”Œï¼ˆé¢„è®¡ 1 å¤©ï¼‰

**é‡Œç¨‹ç¢‘ M4ï¼šèƒ½é€šè¿‡ MCP/CLI å¤–éƒ¨æ¥å…¥**

### ä»»åŠ¡æ¸…å•

| # | ä»»åŠ¡ | é¢„è®¡è€—æ—¶ | ä¼˜å…ˆçº§ | ä¾èµ– |
|---|------|---------|--------|------|
| 4.1 | MCP Server â€” 9 tools å®ç° (mcp/server.ts) | 3h | P0 | M3 |
| 4.2 | stdio ä¼ è¾“æ¨¡å¼ | 30min | P0 | 4.1 |
| 4.3 | SSE ä¼ è¾“æ¨¡å¼ | 30min | P2 | 4.1 |
| 4.4 | CLI å…¥å£ (bin/agent-memory.ts) â€” init/remember/recall/status/boot/migrate | 2h | P0 | M3 |
| 4.5 | Markdown â†’ SQLite è¿ç§»å·¥å…· (migrate/from-markdown.ts) | 1.5h | P0 | M1 |
| 4.6 | Phase 4 ç«¯åˆ°ç«¯æµ‹è¯• | 1h | P0 | å…¨éƒ¨ |

**M4 éªŒæ”¶æ ‡å‡†ï¼š**
- Claude Code é€šè¿‡ MCP è¿æ¥ â†’ èƒ½ remember + recall
- `agent-memory init` â†’ åˆ›å»ºæ•°æ®åº“
- `agent-memory recall "something"` â†’ è¿”å›ç»“æœ
- `agent-memory migrate ./memory/` â†’ å¯¼å…¥æ—§ Markdown è®°å¿†
- `agent-memory status` â†’ æ˜¾ç¤ºå„å±‚ç»Ÿè®¡

---

## Phase 5ï¼šæ–‡æ¡£ + å‘å¸ƒ ğŸ“¦ï¼ˆé¢„è®¡ 1 å¤©ï¼‰

**é‡Œç¨‹ç¢‘ M5ï¼šå¯å‘å¸ƒåˆ° npm + GitHub Release**

### ä»»åŠ¡æ¸…å•

| # | ä»»åŠ¡ | é¢„è®¡è€—æ—¶ | ä¼˜å…ˆçº§ | ä¾èµ– |
|---|------|---------|--------|------|
| 5.1 | README.md è‹±æ–‡ | 1.5h | P0 | M4 |
| 5.2 | README.zh-CN.md ä¸­æ–‡ | 1h | P0 | 5.1 |
| 5.3 | OpenClaw é›†æˆæŒ‡å— | 1h | P1 | M4 |
| 5.4 | npm publish å‡†å¤‡ï¼ˆpackage.jsonã€.npmignoreã€buildï¼‰ | 30min | P0 | M4 |
| 5.5 | GitHub Release + CHANGELOG | 30min | P0 | 5.4 |
| 5.6 | LOCOMO Benchmark æµ‹è¯•ï¼ˆå¦‚æ—¶é—´å…è®¸ï¼‰ | 2h | P2 | M4 |
| 5.7 | è¡¥å……æµ‹è¯•è‡³è¦†ç›–ç‡ â‰¥80% | 1h | P0 | å…¨éƒ¨ |

**M5 éªŒæ”¶æ ‡å‡†ï¼š**
- `npm install agent-memory` å¯ç”¨
- README åŒ…å«å¿«é€Ÿå¼€å§‹ã€æ¶æ„å›¾ã€API æ–‡æ¡£
- æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œè¦†ç›–ç‡ â‰¥80%
- GitHub Release v2.0.0 å‘å¸ƒ

---

## é£é™©ç®¡ç†

| é£é™© | å¯èƒ½æ€§ | å½±å“ | åº”å¯¹ |
|------|--------|------|------|
| FTS5 ä¸­æ–‡åˆ†è¯ä¸å¥½ | ä¸­ | ä¸­ | å…ˆç”¨ unicode61ï¼Œåç»­å¯æ¥ jieba |
| è‰¾å®¾æµ©æ–¯å‚æ•°éœ€è°ƒä¼˜ | é«˜ | ä½ | å…ˆç”¨è®ºæ–‡é»˜è®¤å€¼ï¼Œä¸Šçº¿åçœ‹æ•ˆæœè°ƒ |
| MCP SDK ç‰ˆæœ¬å…¼å®¹ | ä½ | é«˜ | é”å®šç‰ˆæœ¬ï¼Œå†™å…¼å®¹å±‚ |
| better-sqlite3 ç¼–è¯‘é—®é¢˜ | ä¸­ | ä¸­ | æä¾›é¢„ç¼–è¯‘äºŒè¿›åˆ¶ï¼Œæ–‡æ¡£å†™æ˜ |
| è¿ç§»å·¥å…·ä¸¢æ•°æ® | ä½ | é«˜ | è¿ç§»å‰è‡ªåŠ¨å¤‡ä»½ï¼Œdry-run æ¨¡å¼ |
